{% extends "layout.njk" %}
{% from "fieldset/macro.njk" import govukFieldset %}
{% from "button/macro.njk" import govukButton %}
{% from "error-summary.njk" import errorSummary %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}

{% set errorMap = {
        'scan-file': {
          'unauthorized': { ref: '#scan-file', text: 'Enter your email address' }
        }
    }
%}

{% block pageTitle %}Upload a work schedule{% endblock %}

{% block topNavigation %}
<p class="govuk-body sdds-save-link">
    <a class="govuk-link govuk-link--no-visited-state" href="/applications">Save and return later</a>
</p>
{% endblock %}

{% block content %}

{{ errorSummary(error, errorMap, 'There is a problem') }}

<h1 class="govuk-heading-xl">Upload a work schedule</h1>

<div class="govuk-grid-row">
    <div class="{{ widthClass if widthClass else 'govuk-grid-column-two-thirds' }}">

      <p class="govuk-body">The work schedule must include:</p>
        <ul class="govuk-list govuk-list--bullet">
            <li>how and when each badger sett will be affected</li>
            <li>types of machinery or tools that will be used and their distance from each badger sett</li>
            <li>justification for why each badger sett needs to be affected</li>
            <li>dates of any proposed mitigation work</li>
        </ul>

        <h2 class="govuk-heading-m">Upload a file</h2>
        <p class="govuk-body">The file must be smaller than 30MB. It can be:</p>
        <ul class="govuk-list govuk-list--bullet">
            <li>text (DOC, DOCX, PDF or ODT)</li>
            <li>a spreadsheet (XLS, XLSX or ODS)</li>
        </ul>

        <form enctype="multipart/form-data" method="post">
            {% call govukFieldset({
              legend: {
                classes: "govuk-fieldset__legend--l govuk-!-margin-bottom-0"
              }
            }) %}

            <input type="file" name="file-upload">
            
            <div> <!-- Div user here to "push" the button onto a newline, otherwise it displays next to the file upload button, which is incorrect -->
              {{ govukButton({
                  attributes: { id: 'continue' },
                  preventDoubleClick: true,
                  id: "scan-file",
                  name: "scan-file",
                  text: 'Continue',
                  classes: "govuk-!-margin-top-5",
                  errorMessage: { text: 'This is a message that needs to show' } if error['scan-file']
              }) }}
            </div>
            
            {% endcall %}
        </form>
    </div>
</div>
{% endblock %}
